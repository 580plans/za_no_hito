<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プロフィール - 座の人</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* profile.html 固有のスタイル */
        .main-content-profile {
            padding: 20px;
            background-color: #fff;
        }
        .profile-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .profile-header h2 { margin: 0; font-size: 1.8em; }
        .edit-button { background-color: #808080; color: white; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; }
        .edit-button:hover { background-color: #666666; }
        .profile-info { margin-bottom: 30px; padding: 20px; border: 1px solid #eee; border-radius: 8px; display: flex; align-items: flex-start; background-color: #fcfcfc; }
        .profile-image-container { margin-right: 25px; flex-shrink: 0; }
        .profile-image { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 2px solid #ddd; }
        .profile-details { flex-grow: 1; }
        .profile-details p { margin-bottom: 10px; line-height: 1.6; }
        .profile-details strong { font-weight: bold; color: #555; margin-right: 5px; }
        .profile-edit-form { display: none; margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background-color: #f8f9fa; }
        .profile-edit-form h3 { margin-top:0; margin-bottom:20px; font-size:1.5em; border-bottom:1px solid #ccc; padding-bottom:10px;}
        .profile-edit-form label { display: block; margin-bottom: 6px; font-weight: bold; color: #444; }
        .profile-edit-form input[type="text"],
        .profile-edit-form select,
        .profile-edit-form textarea,
        .profile-edit-form input[type="file"] { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1em; }
        .profile-edit-form textarea { min-height: 80px; resize: vertical; }
        #image-preview { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 1px solid #ccc; margin-top: 10px; display: block; }
        .profile-edit-form button[type="submit"] { background-color: #5cb85c; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; width: auto; display: inline-block; }
        .profile-edit-form button[type="submit"]:hover { background-color: #4cae4c; }
        .profile-edit-form .cancel-button { background-color: #808080; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; width: auto; display: inline-block; margin-left:10px; }
        .profile-edit-form .cancel-button:hover { background-color: #666; }
        .recent-essays-section { margin-top: 40px; }
        .recent-essays-section h3 { font-size: 1.6em; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #ddd; }
        #recent-profile-essays-list { list-style: none; padding: 0; margin: 0; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>座の人</h1>
            <nav>
                <ul>
                    <li><a href="logged_in.html">ホーム</a></li>
                    <li><a href="bulletinboard.html">掲示板</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <div id="left-column-container">
                <!-- script.jsによって _left_column_logged_in.html がここに読み込まれます -->
            </div>
            <div class="main-content-profile">
                <div class="profile-header">
                    <h2>プロフィール</h2>
                    <button id="edit-profile-button" class="edit-button">編集</button>
                </div>
                <div class="profile-info" id="profile-display">
                    <div class="profile-image-container">
                        <!-- ★画像パスを統一 -->
                        <img src="default_user_thumb.png" alt="プロフィール画像" class="profile-image" id="display-profile-image">
                    </div>
                    <div class="profile-details">
                        <p><strong>ユーザー名:</strong> <span id="display-username">[ユーザー名]</span></p>
                        <p><strong>年齢:</strong> <span id="display-age">[年齢]</span></p>
                        <p><strong>性別:</strong> <span id="display-gender">[性別]</span></p>
                        <p><strong>血液型:</strong> <span id="display-blood_type">[血液型]</span></p>
                        <p><strong>星座:</strong> <span id="display-star_sign">[星座]</span></p>
                        <p><strong>居住地:</strong> <span id="display-residence">[居住地]</span></p>
                        <p><strong>身長:</strong> <span id="display-height">[身長]</span></p>
                        <p><strong>好きな芸能人:</strong> <span id="display-favorite_celebrity">[好きな芸能人]</span></p>
                        <p><strong>好きなタイプ:</strong> <span id="display-favorite_type">[好きなタイプ]</span></p>
                        <p><strong>好きな食べ物:</strong> <span id="display-favorite_food">[好きな食べ物]</span></p>
                        <p><strong>表向きの趣味:</strong> <span id="display-public_hobby">[表向きの趣味]</span></p>
                        <p><strong>ここでしか言えない趣味:</strong> <span id="display-private_hobby">[ここでしか言えない趣味]</span></p>
                        <p><strong>特技:</strong> <span id="display-skill">[特技]</span></p>
                        <p><strong>好きなマンガ:</strong> <span id="display-favorite_manga">[好きなマンга]</span></p>
                        <p><strong>好きな映画・アニメ・ラジオ:</strong> <span id="display-favorite_media">[好きな映画・アニメ・ラジオ]</span></p>
                        <p><strong>座右の銘:</strong> <span id="display-motto">[座右の銘]</span></p>
                        <p><strong>必殺技:</strong> <span id="display-ultimate_skill">[必殺技]</span></p>
                        <p><strong>許せない人のタイプ:</strong> <span id="display-disliked_person">[許せない人のタイプ]</span></p>
                        <p><strong>将来の夢:</strong> <span id="display-future_dream">[将来の夢]</span></p>
                    </div>
                </div>
                <form id="profile-edit-form" class="profile-edit-form">
                    <h3>プロフィール編集</h3>
                    <div><label for="edit_profile_image">プロフィール画像:</label><input type="file" id="edit_profile_image" name="profile_image" accept="image/*"><img src="default_user_thumb.png" alt="プレビュー" id="image-preview"></div>
                    <div><label for="edit_username">ユーザー名:</label><input type="text" id="edit_username" name="username" required></div>
                    <div><label for="edit_age">年齢:</label><input type="text" id="edit_age" name="age"></div>
                    <div><label for="edit_gender">性別:</label><select id="edit_gender" name="gender"><option value="">選択してください</option><option value="male">男性</option><option value="female">女性</option><option value="other">その他</option></select></div>
                    <div><label for="edit_blood_type">血液型:</label><select id="edit_blood_type" name="blood_type"><option value="">選択してください</option><option value="A">A型</option><option value="B">B型</option><option value="O">O型</option><option value="AB">AB型</option></select></div>
                    <div><label for="edit_star_sign">星座:</label><input type="text" id="edit_star_sign" name="star_sign"></div>
                    <div><label for="edit_residence">居住地:</label><input type="text" id="edit_residence" name="residence"></div>
                    <div><label for="edit_height">身長:</label><input type="text" id="edit_height" name="height"></div>
                    <div><label for="edit_favorite_celebrity">好きな芸能人:</label><textarea id="edit_favorite_celebrity" name="favorite_celebrity"></textarea></div>
                    <div><label for="edit_favorite_type">好きなタイプ:</label><textarea id="edit_favorite_type" name="favorite_type"></textarea></div>
                    <div><label for="edit_favorite_food">好きな食べ物:</label><textarea id="edit_favorite_food" name="favorite_food"></textarea></div>
                    <div><label for="edit_public_hobby">表向きの趣味:</label><textarea id="edit_public_hobby" name="public_hobby"></textarea></div>
                    <div><label for="edit_private_hobby">ここでしか言えない趣味:</label><textarea id="edit_private_hobby" name="private_hobby"></textarea></div>
                    <div><label for="edit_skill">特技:</label><textarea id="edit_skill" name="skill"></textarea></div>
                    <div><label for="edit_favorite_manga">好きなマンガ:</label><textarea id="edit_favorite_manga" name="favorite_manga"></textarea></div>
                    <div><label for="edit_favorite_media">好きな映画・アニメ・ラジオ:</label><textarea id="edit_favorite_media" name="favorite_media"></textarea></div>
                    <div><label for="edit_motto">座右の銘:</label><textarea id="edit_motto" name="motto"></textarea></div>
                    <div><label for="edit_ultimate_skill">必殺技:</label><textarea id="edit_ultimate_skill" name="ultimate_skill"></textarea></div>
                    <div><label for="edit_disliked_person">許せない人のタイプ:</label><textarea id="edit_disliked_person" name="disliked_person"></textarea></div>
                    <div><label for="edit_future_dream">将来の夢:</label><textarea id="edit_future_dream" name="future_dream"></textarea></div>
                    <button type="submit">保存</button>
                    <button type="button" id="cancel-edit-button" class="cancel-button">キャンセル</button>
                </form>
                <section class="recent-essays-section">
                    <h3>最近の随筆</h3>
                    <ul id="recent-profile-essays-list">
                        <!-- script.jsによってここに最近の随筆が挿入されます -->
                    </ul>
                </section>
                <p style="margin-top: 30px; text-align:center;"><a href="logged_in.html">ホームに戻る</a></p>
            </div>
        </main>
        <footer>
            <p>© 2025 座の人</p>
        </footer>
    </div>
    <script src="load_parts.js"></script>
    <script src="script.js"></script>
    <script>
        // ★★★ インラインスクリプトを大幅に簡素化 ★★★
        // script.js 内の App.init() がページのパスを判定して、
        // プロフィールページの初期化（部品読み込み、データ描画、イベント設定など）を
        // すべて自動的に行ってくれます。
        document.addEventListener('DOMContentLoaded', () => {
            console.log("profile.html is loaded. App.init() in script.js will handle everything.");
        });
    </script>
</body>
</html>